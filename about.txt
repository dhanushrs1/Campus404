Campus404: Complete System Workflow
Phase 1: Authentication & Initialization
1. The Login (User Action)

UI (React): The student opens http://localhost. They enter their Username and Password and click "Login".

Backend (FastAPI): Nginx routes this to the Python server. FastAPI hashes the password, checks the MySQL Users Table, and verifies the credentials.

Response: If correct, FastAPI sends back a success token and the user's current total_xp.

2. Loading the Map (The Gamified Dashboard)

UI (React): React loads the Isometric Campus Map. It asks the backend, "Which buildings should be unlocked for this user?"

Backend (FastAPI): Queries the MySQL Submissions Table to see what levels this student has already passed.

Response: Returns a list of unlocked levels. React lights up those specific buildings on the map.

Phase 2: The Challenge Arena
3. Selecting a Level (User Action)

UI (React): The student clicks on an active building (e.g., "Python Lab - Level 1").

Backend (FastAPI): React requests the level data. FastAPI queries the MySQL Levels Table for Level 1.

Response: FastAPI sends the title, description, and the broken_code. (Note: It does NOT send the correct answer or the hint yet, to prevent cheating!)

4. The Code Editor (User Action)

UI (React): The student reads the objective and sees the broken code in their browser editor. They type their fix and hit the big "Submit" button.

Phase 3: The Execution Engine (The Core Tech)
5. The Submission Hand-off

UI (React): Takes the student's code and POSTs it to the FastAPI backend.

Backend (FastAPI): FastAPI receives the code. It packages the code along with the expected_output (from the database) and sends it securely to the Judge0 Sandbox (or the local Mock function).

6. The Sandbox Execution

Sandbox (Judge0): Creates a secure, isolated container. Runs the Python code.

Evaluation: Judge0 compares the student's console output against the expected_output.

Response: Judge0 tells FastAPI: "Status 3: Accepted" (Passed) OR "Status 4: Wrong Answer/Error" (Failed).

Phase 4: The Gamification Loop (Success vs. Failure)
Scenario A: The Code is CORRECT ✅
Backend (FastAPI): 1. Updates the MySQL Users Table (Adds +20 XP to the student).
2. Logs a successful entry in the MySQL Submissions Table.
3. Triggers the "Unlock Next Level" logic.

Response to React: Sends a "Success" payload, including the student's new total XP, their new Badge data, and the Official Correct Code (fetched from GitHub or the DB) for them to review.

UI (React): Triggers a celebration animation, awards the Badge, shows the official solution, and unlocks the next building on the map.

Scenario B: The Code is INCORRECT ❌
Backend (FastAPI): 1. Logs a failed attempt in the MySQL Submissions Table.
2. Counts how many times the student has failed this specific level.
3. The Hint Logic: If Failed Attempts == 3, FastAPI queries the database for this level's hint.

Response to React: Sends a "Failed" payload. If it was their 3rd failure, the payload includes the hint text.

UI (React): Shakes the screen or shows an error message. If the hint was provided, a lightbulb icon unlocks. The student reads the hint and tries again (Looping back to Phase 2, Step 4).
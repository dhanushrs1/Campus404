{% extends "sqladmin/base.html" %}
{% from 'sqladmin/_macros.html' import display_menu %}

{% block head %}
{# ── Google Fonts ─────────────────────────────────────────── #}
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

{# ── Campus404 Premium Admin Theme ─────────────────────────── #}
<link rel="stylesheet" href="{{ url_for('static', path='admin_theme.css') }}">

<style>
  /* Inline micro-overrides that need template-context or are very small */

  /* Sidebar logo accent pulse  */
  @keyframes pulse-glow {
    0%, 100% { filter: drop-shadow(0 0 6px rgba(99,102,241,0.5)); }
    50%       { filter: drop-shadow(0 0 14px rgba(167,139,250,0.8)); }
  }
  .brand-hex { animation: pulse-glow 3s ease-in-out infinite; }

  /* Sidebar footer */
  .sidebar-footer {
    padding: 14px 20px;
    border-top: 1px solid var(--border);
    font-size: 0.7rem;
    color: var(--text-muted);
    letter-spacing: 0.04em;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .sidebar-footer .version-tag {
    background: var(--brand-glow);
    color: var(--brand-400);
    border: 1px solid var(--brand-border);
    border-radius: 999px;
    padding: 2px 8px;
    font-size: 0.65rem;
    font-weight: 600;
  }

  /* Sidebar section label */
  .nav-section-label {
    font-size: 0.62rem;
    font-weight: 700;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: var(--text-muted);
    padding: 16px 12px 5px;
    display: block;
  }

  /* Active indicator dot */
  .nav-link.active::after {
    content: '';
    width: 6px; height: 6px;
    background: var(--brand-400);
    border-radius: 50%;
    margin-left: auto;
    flex-shrink: 0;
    box-shadow: 0 0 6px var(--brand-400);
  }

  /* Header action row */
  .page-header-inner {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 16px;
  }

  /* Page header right slot */
  .page-header-actions {
    display: flex;
    align-items: center;
    gap: 8px;
    flex-shrink: 0;
  }
</style>
{% endblock %}

{% block body %}
<div class="wrapper" style="display:flex; min-height:100vh;">

  {# ── SIDEBAR ─────────────────────────────────────────────── #}
  <aside class="navbar navbar-vertical navbar-expand-lg navbar-dark"
         style="flex-direction:column; min-height:100vh;">

    {# Brand #}
    <div class="container-fluid" style="padding:0; flex-direction:column; align-items:stretch; flex:1; display:flex;">

      <a href="{{ url_for('admin:index') }}" class="navbar-brand"
         style="text-decoration:none; border-bottom:1px solid var(--border); padding:22px 20px; display:flex; align-items:center; gap:10px;">
        <span class="brand-hex" style="font-size:1.5rem; color:var(--brand-400); line-height:1;">⬡</span>
        <div>
          <div style="font-size:0.95rem; font-weight:800; letter-spacing:-0.025em; color:var(--text-primary); line-height:1.1;">
            Campus<span style="color:var(--brand-400);">404</span>
          </div>
          <div style="font-size:0.6rem; font-weight:600; letter-spacing:0.1em; text-transform:uppercase; color:var(--text-muted); margin-top:1px;">
            Admin Panel
          </div>
        </div>
      </a>

      {# Nav Menu #}
      <nav class="navbar-nav" style="flex:1; overflow-y:auto; padding:10px 10px;">
        <span class="nav-section-label">Navigation</span>
        {{ display_menu(admin._menu, request) }}
      </nav>

      {# Logout #}
      {% if admin.authentication_backend %}
      <div style="padding:12px 12px;">
        <a href="{{ request.url_for('admin:logout') }}"
           class="btn btn-secondary"
           style="width:100%; justify-content:center;">
          <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24"
               fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
            <polyline points="16 17 21 12 16 7"/>
            <line x1="21" y1="12" x2="9" y2="12"/>
          </svg>
          Logout
        </a>
      </div>
      {% endif %}

      {# Sidebar Footer #}
      <div class="sidebar-footer">
        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"
             fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/>
        </svg>
        <span>Campus404</span>
        <span class="version-tag">v1.0</span>
        <span style="margin-left:auto;">&#9679;</span>
      </div>

    </div>
  </aside>

  {# ── MAIN CONTENT ─────────────────────────────────────────── #}
  <div class="page-wrapper" style="flex:1;">

    {# Sticky Page Header #}
    <div class="page-header d-print-none">
      {% block content_header %}
      <div class="page-header-inner">
        <div>
          <div class="page-pretitle">Campus404 &rsaquo; Dashboard</div>
          <h2 class="page-title">{{ title }}</h2>
        </div>
        <div class="page-header-actions">
          {# Subtitle / badge if provided #}
          {% if subtitle %}
          <span class="badge bg-primary">{{ subtitle }}</span>
          {% endif %}
        </div>
      </div>
      {% endblock %}
    </div>

    {# Page Body #}
    <div class="page-body flex-grow-1">
      <div class="container-fluid">
        <div class="row row-deck row-cards">
          {% block content %}{% endblock %}
        </div>
      </div>
    </div>

  </div>{# /page-wrapper #}
</div>{# /wrapper #}
{% endblock %}
